<script setup lang="ts">
import mermaid from 'mermaid';
import { onMounted } from 'vue';
const { t } = useI18n();

onMounted(() => {
    mermaid.init(undefined, '.mermaid');
});
</script>

<template>
    <section id="how-it-works" class="section mb-10">
        <UContainer>
            <div class="flex gap-5">
                <div class="w-1/2">
                    <div class="mermaid">
                        graph TD; A[ðŸ‘¤
                        {{ t('how_it_works.graphql.user_request') }}] -->|ðŸ“©
                        {{ t('how_it_works.graphql.cache_check') }}| B[ðŸŒ
                        GraphQL API]; B -->|ðŸ›‘
                        {{ t('how_it_works.graphql.cache_check') }}| D[âš¡
                        Redis]; D -->|âœ…
                        {{ t('how_it_works.graphql.cache_found') }}| B; D -->|âŒ
                        {{ t('how_it_works.graphql.cache_miss') }}| E[ðŸ”
                        Sora-Ð¿Ð°Ñ€ÑÐµÑ€]; E -->|ðŸ›‘
                        {{ t('how_it_works.graphql.cache_check') }}| D; D -->|âœ…
                        {{ t('how_it_works.graphql.cache_found') }}| E; E -->|ðŸ’¾
                        {{ t('how_it_works.graphql.database_check') }}| H[ðŸ—„ï¸
                        MySQL / MongoDB]; H -->|âœ…
                        {{ t('how_it_works.graphql.database_found') }}| E; H
                        -->|âŒ {{ t('how_it_works.graphql.database_miss') }}|
                        F[ðŸŒ MyAnimeList API]; F -->|ðŸ“¨
                        {{ t('how_it_works.graphql.api_request') }}| G[ðŸ› ï¸
                        {{ t('how_it_works.graphql.data_processing') }}]; G
                        -->|ðŸ’¾ {{ t('how_it_works.graphql.save_data') }}| H & D;
                        G -->|ðŸš€ {{ t('how_it_works.graphql.send_data') }}| E; E
                        -->|ðŸ“¤ {{ t('how_it_works.graphql.send_data') }}| B; B
                        -->|ðŸ“¤ {{ t('how_it_works.graphql.user_request') }}| A;
                    </div>
                </div>
                <div class="w-1/2">
                    <div>
                        <h3
                            class="text-right text-4xl font-semibold text-primary"
                        >
                            {{ t('how_it_works.title') }}
                        </h3>
                        <p class="text-right text-lg">
                            {{ t('how_it_works.subtitle') }}
                        </p>
                        <ul class="list-decimal ml-6 mt-5">
                            <li>{{ t('how_it_works.details.step_1') }}</li>
                            <li>{{ t('how_it_works.details.step_2') }}</li>
                            <li>{{ t('how_it_works.details.step_3') }}</li>
                            <li>{{ t('how_it_works.details.step_4') }}</li>
                            <li>{{ t('how_it_works.details.step_5') }}</li>
                            <li>{{ t('how_it_works.details.step_6') }}</li>
                            <li>{{ t('how_it_works.details.step_7') }}</li>
                        </ul>
                    </div>
                </div>
            </div>
        </UContainer>
    </section>
</template>
